{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Serenyo/Projetos/nexo/frontend/app/%28entity%29/components/CrudLayout.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React from 'react'\r\n\r\ntype CrudLayoutProps = {\r\n  title: string\r\n  subtitle?: string\r\n  actions?: React.ReactNode\r\n  children: React.ReactNode\r\n}\r\n\r\nexport default function CrudLayout({\r\n  title,\r\n  subtitle,\r\n  actions,\r\n  children,\r\n}: CrudLayoutProps) {\r\n  return (\r\n    <div style={container}>\r\n      <div style={header}>\r\n        <div>\r\n          <h1 style={titleStyle}>{title}</h1>\r\n          {subtitle && <p style={subtitleStyle}>{subtitle}</p>}\r\n        </div>\r\n\r\n        {actions && <div>{actions}</div>}\r\n      </div>\r\n\r\n      <div style={content}>{children}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\n/* ===== styles ===== */\r\n\r\nconst container = {\r\n  background: '#fff',\r\n  borderRadius: 12,\r\n  padding: 24,\r\n  boxShadow: '0 4px 16px rgba(0,0,0,0.06)',\r\n}\r\n\r\nconst header = {\r\n  display: 'flex',\r\n  justifyContent: 'space-between',\r\n  alignItems: 'center',\r\n  marginBottom: 20,\r\n}\r\n\r\nconst titleStyle = {\r\n  fontSize: 24,\r\n  fontWeight: 700,\r\n  marginBottom: 4,\r\n}\r\n\r\nconst subtitleStyle = {\r\n  fontSize: 14,\r\n  color: '#5b6b82',\r\n}\r\n\r\nconst content = {\r\n  width: '100%',\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAWe,SAAS,WAAW,EACjC,KAAK,EACL,QAAQ,EACR,OAAO,EACP,QAAQ,EACQ;IAChB,qBACE,6LAAC;QAAI,OAAO;;0BACV,6LAAC;gBAAI,OAAO;;kCACV,6LAAC;;0CACC,6LAAC;gCAAG,OAAO;0CAAa;;;;;;4BACvB,0BAAY,6LAAC;gCAAE,OAAO;0CAAgB;;;;;;;;;;;;oBAGxC,yBAAW,6LAAC;kCAAK;;;;;;;;;;;;0BAGpB,6LAAC;gBAAI,OAAO;0BAAU;;;;;;;;;;;;AAG5B;KApBwB;AAsBxB,sBAAsB,GAEtB,MAAM,YAAY;IAChB,YAAY;IACZ,cAAc;IACd,SAAS;IACT,WAAW;AACb;AAEA,MAAM,SAAS;IACb,SAAS;IACT,gBAAgB;IAChB,YAAY;IACZ,cAAc;AAChB;AAEA,MAAM,aAAa;IACjB,UAAU;IACV,YAAY;IACZ,cAAc;AAChB;AAEA,MAAM,gBAAgB;IACpB,UAAU;IACV,OAAO;AACT;AAEA,MAAM,UAAU;IACd,OAAO;AACT"}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///C:/Serenyo/Projetos/nexo/frontend/lib/api.ts"],"sourcesContent":["const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001'\r\n\r\nasync function request(\r\n  path: string,\r\n  options: RequestInit = {},\r\n) {\r\n  const token =\r\n    typeof window !== 'undefined'\r\n      ? localStorage.getItem('entity_token')\r\n      : null\r\n\r\n  const res = await fetch(`${API_URL}${path}`, {\r\n    ...options,\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n      ...(options.headers || {}),\r\n    },\r\n  })\r\n\r\n  const contentType = res.headers.get('content-type')\r\n\r\n  // 游녢 prote칞칚o contra HTML\r\n  if (!contentType || !contentType.includes('application/json')) {\r\n    const text = await res.text()\r\n    throw new Error('Resposta inv치lida do servidor')\r\n  }\r\n\r\n  if (!res.ok) {\r\n    const error = await res.json()\r\n    throw new Error(error.message || 'Erro na requisi칞칚o')\r\n  }\r\n\r\n  return res.json()\r\n}\r\n\r\nexport const api = {\r\n  get: (path: string) => request(path),\r\n  post: (path: string, body: any) =>\r\n    request(path, {\r\n      method: 'POST',\r\n      body: JSON.stringify(body),\r\n    }),\r\n  put: (path: string, body: any) =>\r\n    request(path, {\r\n      method: 'PUT',\r\n      body: JSON.stringify(body),\r\n    }),\r\n  delete: (path: string) =>\r\n    request(path, {\r\n      method: 'DELETE',\r\n    }),\r\n}\r\n"],"names":[],"mappings":";;;;AAAgB;AAAhB,MAAM,UAAU,6DAAmC;AAEnD,eAAe,QACb,IAAY,EACZ,UAAuB,CAAC,CAAC;IAEzB,MAAM,QACJ,uCACI,aAAa,OAAO,CAAC,kBACrB;IAEN,MAAM,MAAM,MAAM,MAAM,GAAG,UAAU,MAAM,EAAE;QAC3C,GAAG,OAAO;QACV,SAAS;YACP,gBAAgB;YAChB,GAAI,QAAQ;gBAAE,eAAe,CAAC,OAAO,EAAE,OAAO;YAAC,IAAI,CAAC,CAAC;YACrD,GAAI,QAAQ,OAAO,IAAI,CAAC,CAAC;QAC3B;IACF;IAEA,MAAM,cAAc,IAAI,OAAO,CAAC,GAAG,CAAC;IAEpC,0BAA0B;IAC1B,IAAI,CAAC,eAAe,CAAC,YAAY,QAAQ,CAAC,qBAAqB;QAC7D,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,QAAQ,MAAM,IAAI,IAAI;QAC5B,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACnC;IAEA,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,MAAM;IACjB,KAAK,CAAC,OAAiB,QAAQ;IAC/B,MAAM,CAAC,MAAc,OACnB,QAAQ,MAAM;YACZ,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;QACvB;IACF,KAAK,CAAC,MAAc,OAClB,QAAQ,MAAM;YACZ,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;QACvB;IACF,QAAQ,CAAC,OACP,QAAQ,MAAM;YACZ,QAAQ;QACV;AACJ"}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":["file:///C:/Serenyo/Projetos/nexo/frontend/app/%28entity%29/dashboard/usuarios/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState, CSSProperties } from 'react'\r\nimport {\r\n  FileText,\r\n  FileSpreadsheet,\r\n  Plus,\r\n  X,\r\n  Pencil,\r\n  Trash2,\r\n  Clock,\r\n} from 'lucide-react'\r\nimport jsPDF from 'jspdf'\r\nimport autoTable from 'jspdf-autotable'\r\nimport * as XLSX from 'xlsx'\r\nimport CrudLayout from '../../components/CrudLayout'\r\nimport CrudTable from '../../components/CrudTable'\r\nimport CrudPagination from '../../components/CrudPagination'\r\nimport { api } from '@/lib/api'\r\n\r\ntype Usuario = {\r\n  user_id: string\r\n  nome: string\r\n  email: string\r\n  perfil: 'Administrador' | 'Usuario'\r\n  ativo: 'Sim' | 'N칚o'\r\n  created_at: string\r\n  updated_at: string\r\n  user_id_log: string\r\n}\r\n\r\nexport default function UsuariosPage() {\r\n  const [dados, setDados] = useState<Usuario[]>([])\r\n  const [busca, setBusca] = useState('')\r\n  const [page, setPage] = useState(1)\r\n  const [total, setTotal] = useState(0)\r\n\r\n  const [open, setOpen] = useState(false)\r\n  const [editando, setEditando] = useState(false)\r\n  const [confirmar, setConfirmar] = useState<Usuario | null>(null)\r\n  const [log, setLog] = useState<Usuario | null>(null)\r\n\r\n  const [form, setForm] = useState<any>({\r\n    user_id: '',\r\n    nome: '',\r\n    email: '',\r\n    senha: '',\r\n    perfil: 'Usuario',\r\n    ativo: 'Sim',\r\n  })\r\n\r\n  const pageSize = 5\r\n\r\n  async function carregar() {\r\n    const res = await api.get(\r\n      `/entity/usuarios?page=${page}&limit=${pageSize}&search=${busca}`,\r\n    )\r\n    setDados(res.data)\r\n    setTotal(res.total)\r\n  }\r\n\r\n  useEffect(() => {\r\n    carregar()\r\n  }, [page, busca])\r\n\r\n  function novoUsuario() {\r\n    setForm({\r\n      user_id: '',\r\n      nome: '',\r\n      email: '',\r\n      senha: '',\r\n      perfil: 'Usuario',\r\n      ativo: 'Sim',\r\n    })\r\n    setEditando(false)\r\n    setOpen(true)\r\n  }\r\n\r\n  function editarUsuario(usuario: Usuario) {\r\n    setForm(usuario)\r\n    setEditando(true)\r\n    setOpen(true)\r\n  }\r\n\r\n  async function salvar() {\r\n    if (!form.email || form.email.trim() === '') {\r\n      alert('O campo E-mail 칠 obrigat칩rio.')\r\n      return\r\n    }\r\n\r\n    try {\r\n      if (editando) {\r\n        await api.put(`/entity/usuarios/${form.user_id}`, form)\r\n      } else {\r\n        await api.post('/entity/usuarios', form)\r\n      }\r\n\r\n      setOpen(false)\r\n      carregar()\r\n    } catch (err: any) {\r\n      const mensagemBackend = err?.response?.data?.message\r\n\r\n      if (\r\n        mensagemBackend &&\r\n        mensagemBackend.toLowerCase().includes('e-mail')\r\n      ) {\r\n        alert(\r\n          'Este e-mail j치 est치 cadastrado para outro usu치rio.\\n' +\r\n          'Use um e-mail diferente ou edite o usu치rio existente.',\r\n        )\r\n        return\r\n      }\r\n\r\n      alert(\r\n        'N칚o foi poss칤vel salvar o usu치rio agora.\\n' +\r\n        'Tente novamente em instantes.',\r\n      )\r\n    }\r\n  }\r\n\r\n  async function excluir() {\r\n    if (!confirmar) return\r\n    await api.put(`/entity/usuarios/${confirmar.user_id}/excluir`, {})\r\n    setConfirmar(null)\r\n    carregar()\r\n  }\r\n\r\n  function gerarPDF() {\r\n    const doc = new jsPDF()\r\n    doc.setFontSize(18)\r\n    doc.text('Relat칩rio de Usu치rios', 14, 20)\r\n    doc.setFontSize(11)\r\n    doc.setTextColor(100)\r\n    doc.text(`Gerado em: ${new Date().toLocaleString()}`, 14, 28)\r\n\r\n    autoTable(doc, {\r\n      startY: 36,\r\n      head: [['Nome', 'E-mail', 'Perfil', 'Status']],\r\n      body: dados.map(u => [\r\n        u.nome,\r\n        u.email,\r\n        u.perfil,\r\n        u.ativo === 'Sim' ? 'Ativo' : 'Inativo',\r\n      ]),\r\n      headStyles: {\r\n        fillColor: [11, 26, 58],\r\n        textColor: 255,\r\n        fontStyle: 'bold',\r\n      },\r\n      alternateRowStyles: {\r\n        fillColor: [245, 247, 250],\r\n      },\r\n    })\r\n\r\n    doc.save('usuarios.pdf')\r\n  }\r\n\r\n  function gerarExcel() {\r\n    const ws = XLSX.utils.json_to_sheet(\r\n      dados.map(u => ({\r\n        Nome: u.nome,\r\n        Email: u.email,\r\n        Perfil: u.perfil,\r\n        Status: u.ativo,\r\n      })),\r\n    )\r\n    const wb = XLSX.utils.book_new()\r\n    XLSX.utils.book_append_sheet(wb, ws, 'Usu치rios')\r\n    XLSX.writeFile(wb, 'usuarios.xlsx')\r\n  }\r\n\r\n  return (\r\n    <CrudLayout\r\n      title=\"Usu치rios\"\r\n      subtitle=\"Gerencie os funcion치rios/usu치rios do sistema\"\r\n      actions={\r\n        <div style={actions}>\r\n          <button style={btnDark} onClick={gerarPDF}>\r\n            <FileText size={16} /> PDF\r\n          </button>\r\n          <button style={btnExcel} onClick={gerarExcel}>\r\n            <FileSpreadsheet size={16} /> Excel\r\n          </button>\r\n          <button style={btnPrimary} onClick={novoUsuario}>\r\n            <Plus size={16} /> Novo usu치rio\r\n          </button>\r\n        </div>\r\n      }\r\n    >\r\n      {/* resto do arquivo permanece igual */}\r\n    </CrudLayout>\r\n  )\r\n}\r\n\r\n/* styles permanecem exatamente iguais */\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AASA;AACA;AACA;AACA;AAGA;;;AAlBA;;;;;;;;AA+Be,SAAS;;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAY,EAAE;IAChD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IAEnC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAiB;IAC3D,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,yKAAQ,EAAiB;IAE/C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAM;QACpC,SAAS;QACT,MAAM;QACN,OAAO;QACP,OAAO;QACP,QAAQ;QACR,OAAO;IACT;IAEA,MAAM,WAAW;IAEjB,eAAe;QACb,MAAM,MAAM,MAAM,oHAAG,CAAC,GAAG,CACvB,CAAC,sBAAsB,EAAE,KAAK,OAAO,EAAE,SAAS,QAAQ,EAAE,OAAO;QAEnE,SAAS,IAAI,IAAI;QACjB,SAAS,IAAI,KAAK;IACpB;IAEA,IAAA,0KAAS;kCAAC;YACR;QACF;iCAAG;QAAC;QAAM;KAAM;IAEhB,SAAS;QACP,QAAQ;YACN,SAAS;YACT,MAAM;YACN,OAAO;YACP,OAAO;YACP,QAAQ;YACR,OAAO;QACT;QACA,YAAY;QACZ,QAAQ;IACV;IAEA,SAAS,cAAc,OAAgB;QACrC,QAAQ;QACR,YAAY;QACZ,QAAQ;IACV;IAEA,eAAe;QACb,IAAI,CAAC,KAAK,KAAK,IAAI,KAAK,KAAK,CAAC,IAAI,OAAO,IAAI;YAC3C,MAAM;YACN;QACF;QAEA,IAAI;YACF,IAAI,UAAU;gBACZ,MAAM,oHAAG,CAAC,GAAG,CAAC,CAAC,iBAAiB,EAAE,KAAK,OAAO,EAAE,EAAE;YACpD,OAAO;gBACL,MAAM,oHAAG,CAAC,IAAI,CAAC,oBAAoB;YACrC;YAEA,QAAQ;YACR;QACF,EAAE,OAAO,KAAU;YACjB,MAAM,kBAAkB,KAAK,UAAU,MAAM;YAE7C,IACE,mBACA,gBAAgB,WAAW,GAAG,QAAQ,CAAC,WACvC;gBACA,MACE,yDACA;gBAEF;YACF;YAEA,MACE,+CACA;QAEJ;IACF;IAEA,eAAe;QACb,IAAI,CAAC,WAAW;QAChB,MAAM,oHAAG,CAAC,GAAG,CAAC,CAAC,iBAAiB,EAAE,UAAU,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC;QAChE,aAAa;QACb;IACF;IAEA,SAAS;QACP,MAAM,MAAM,IAAI,iKAAK;QACrB,IAAI,WAAW,CAAC;QAChB,IAAI,IAAI,CAAC,yBAAyB,IAAI;QACtC,IAAI,WAAW,CAAC;QAChB,IAAI,YAAY,CAAC;QACjB,IAAI,IAAI,CAAC,CAAC,WAAW,EAAE,IAAI,OAAO,cAAc,IAAI,EAAE,IAAI;QAE1D,IAAA,yLAAS,EAAC,KAAK;YACb,QAAQ;YACR,MAAM;gBAAC;oBAAC;oBAAQ;oBAAU;oBAAU;iBAAS;aAAC;YAC9C,MAAM,MAAM,GAAG,CAAC,CAAA,IAAK;oBACnB,EAAE,IAAI;oBACN,EAAE,KAAK;oBACP,EAAE,MAAM;oBACR,EAAE,KAAK,KAAK,QAAQ,UAAU;iBAC/B;YACD,YAAY;gBACV,WAAW;oBAAC;oBAAI;oBAAI;iBAAG;gBACvB,WAAW;gBACX,WAAW;YACb;YACA,oBAAoB;gBAClB,WAAW;oBAAC;oBAAK;oBAAK;iBAAI;YAC5B;QACF;QAEA,IAAI,IAAI,CAAC;IACX;IAEA,SAAS;QACP,MAAM,KAAK,yIAAU,CAAC,aAAa,CACjC,MAAM,GAAG,CAAC,CAAA,IAAK,CAAC;gBACd,MAAM,EAAE,IAAI;gBACZ,OAAO,EAAE,KAAK;gBACd,QAAQ,EAAE,MAAM;gBAChB,QAAQ,EAAE,KAAK;YACjB,CAAC;QAEH,MAAM,KAAK,yIAAU,CAAC,QAAQ;QAC9B,yIAAU,CAAC,iBAAiB,CAAC,IAAI,IAAI;QACrC,6IAAc,CAAC,IAAI;IACrB;IAEA,qBACE,6LAAC,4JAAU;QACT,OAAM;QACN,UAAS;QACT,uBACE,6LAAC;YAAI,OAAO;;8BACV,6LAAC;oBAAO,OAAO;oBAAS,SAAS;;sCAC/B,6LAAC,6NAAQ;4BAAC,MAAM;;;;;;wBAAM;;;;;;;8BAExB,6LAAC;oBAAO,OAAO;oBAAU,SAAS;;sCAChC,6LAAC,kPAAe;4BAAC,MAAM;;;;;;wBAAM;;;;;;;8BAE/B,6LAAC;oBAAO,OAAO;oBAAY,SAAS;;sCAClC,6LAAC,6MAAI;4BAAC,MAAM;;;;;;wBAAM;;;;;;;;;;;;;;;;;;AAQ9B,EAEA,uCAAuC;GAnKf;KAAA"}}]
}
{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Serenyo/Projetos/nexo/frontend/app/%28entity%29/dashboard/vinculacao-organizacional/vinculacao-organizacional-page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { Plus, Pencil } from 'lucide-react'\r\n\r\ninterface Departamento {\r\n  dpto_id: number\r\n  nome: string\r\n  funcoes: Funcao[]\r\n}\r\n\r\ninterface Funcao {\r\n  func_id: number\r\n  nome: string\r\n  usuarios: Usuario[]\r\n}\r\n\r\ninterface Usuario {\r\n  vinculacao_id: number\r\n  user_id: string\r\n  nome: string\r\n  percentual_alocacao: number\r\n  custo_mensal: number\r\n}\r\n\r\nexport default function VinculacaoOrganizacionalPage() {\r\n  const [hierarquia, setHierarquia] = useState<Departamento[]>([])\r\n  const [departamentos, setDepartamentos] = useState<any[]>([])\r\n  const [funcoes, setFuncoes] = useState<any[]>([])\r\n  const [usuarios, setUsuarios] = useState<any[]>([])\r\n\r\n  const [showModal, setShowModal] = useState(false)\r\n  const [editando, setEditando] = useState(false)\r\n\r\n  const [form, setForm] = useState<any>({\r\n    vinculacao_id: null,\r\n    dpto_id: '',\r\n    func_id: '',\r\n    user_id: '',\r\n    percentual_alocacao: '',\r\n    custo_mensal: '',\r\n  })\r\n\r\n  useEffect(() => {\r\n    carregarHierarquia()\r\n    carregarCombos()\r\n  }, [])\r\n\r\n  async function carregarHierarquia() {\r\n    const token = localStorage.getItem('entity_token')\r\n\r\n    const res = await fetch(\r\n      `${process.env.NEXT_PUBLIC_API_URL}/entity/vinculacao`,\r\n      {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      },\r\n    )\r\n\r\n    const json = await res.json()\r\n\r\n    // üî¥ corre√ß√£o cr√≠tica\r\n    setHierarquia(Array.isArray(json) ? json : [])\r\n  }\r\n\r\n  async function carregarCombos() {\r\n    const token = localStorage.getItem('entity_token')\r\n\r\n    const res = await fetch(\r\n      `${process.env.NEXT_PUBLIC_API_URL}/entity/vinculacao/combos`,\r\n      {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      },\r\n    )\r\n\r\n    const json = await res.json()\r\n    setDepartamentos(json.departamentos || [])\r\n    setFuncoes(json.funcoes || [])\r\n    setUsuarios(json.usuarios || [])\r\n  }\r\n\r\n  function novo() {\r\n    setForm({\r\n      vinculacao_id: null,\r\n      dpto_id: '',\r\n      func_id: '',\r\n      user_id: '',\r\n      percentual_alocacao: '',\r\n      custo_mensal: '',\r\n    })\r\n    setEditando(false)\r\n    setShowModal(true)\r\n  }\r\n\r\n  function editar(dpto: any, func: any, user: Usuario) {\r\n    setForm({\r\n      vinculacao_id: user.vinculacao_id,\r\n      dpto_id: dpto.dpto_id,\r\n      func_id: func.func_id,\r\n      user_id: user.user_id,\r\n      percentual_alocacao: user.percentual_alocacao,\r\n      custo_mensal: user.custo_mensal,\r\n    })\r\n    setEditando(true)\r\n    setShowModal(true)\r\n  }\r\n\r\n  async function salvar() {\r\n    const token = localStorage.getItem('entity_token')\r\n\r\n    const payload = {\r\n      dpto_id: Number(form.dpto_id),\r\n      func_id: Number(form.func_id),\r\n      user_id: form.user_id,\r\n      percentual_alocacao: Number(form.percentual_alocacao),\r\n      custo_mensal: Number(form.custo_mensal),\r\n    }\r\n\r\n    const url = editando\r\n      ? `${process.env.NEXT_PUBLIC_API_URL}/entity/vinculacao/${form.vinculacao_id}`\r\n      : `${process.env.NEXT_PUBLIC_API_URL}/entity/vinculacao`\r\n\r\n    await fetch(url, {\r\n      method: editando ? 'PUT' : 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      body: JSON.stringify(payload),\r\n    })\r\n\r\n    setShowModal(false)\r\n    carregarHierarquia()\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <h1 className=\"text-2xl font-semibold\">\r\n          Vincula√ß√£o Organizacional\r\n        </h1>\r\n\r\n        <button\r\n          onClick={novo}\r\n          className=\"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded\"\r\n        >\r\n          <Plus size={16} />\r\n          Novo v√≠nculo\r\n        </button>\r\n      </div>\r\n\r\n      {hierarquia.map((dpto) => (\r\n        <div key={dpto.dpto_id} className=\"mb-6\">\r\n          <h2 className=\"text-lg font-semibold mb-2\">\r\n            {dpto.nome}\r\n          </h2>\r\n\r\n          {dpto.funcoes.map((func) => (\r\n            <div key={func.func_id} className=\"ml-4 mb-4\">\r\n              <h3 className=\"font-medium mb-1\">\r\n                {func.nome}\r\n              </h3>\r\n\r\n              <table className=\"w-full border text-sm\">\r\n                <thead>\r\n                  <tr className=\"bg-gray-100\">\r\n                    <th className=\"border px-2 py-1 text-left\">\r\n                      Usu√°rio\r\n                    </th>\r\n                    <th className=\"border px-2 py-1\">%</th>\r\n                    <th className=\"border px-2 py-1\">\r\n                      Custo\r\n                    </th>\r\n                    <th className=\"border px-2 py-1 w-16\">\r\n                      A√ß√µes\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {func.usuarios.map((u) => (\r\n                    <tr key={u.vinculacao_id}>\r\n                      <td className=\"border px-2 py-1\">\r\n                        {u.nome}\r\n                      </td>\r\n                      <td className=\"border px-2 py-1 text-center\">\r\n                        {u.percentual_alocacao}\r\n                      </td>\r\n                      <td className=\"border px-2 py-1 text-right\">\r\n                        {u.custo_mensal?.toFixed(2)}\r\n                      </td>\r\n                      <td className=\"border px-2 py-1 text-center\">\r\n                        <button\r\n                          onClick={() =>\r\n                            editar(dpto, func, u)\r\n                          }\r\n                        >\r\n                          <Pencil size={14} />\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 313, "column": 0}, "map": {"version":3,"sources":["file:///C:/Serenyo/Projetos/nexo/frontend/app/%28entity%29/dashboard/vinculacao-organizacional/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport VinculacaoOrganizacionalPage from './vinculacao-organizacional-page'\r\n\r\nexport default function Page() {\r\n  return <VinculacaoOrganizacionalPage />\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,qBAAO,6LAAC,qNAA4B;;;;;AACtC;KAFwB"}},
    {"offset": {"line": 339, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/lucide-react/dist/esm/icons/plus.js","sources":["file:///C:/Serenyo/Projetos/nexo/frontend/node_modules/lucide-react/src/icons/plus.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M5 12h14', key: '1ays0h' }],\n  ['path', { d: 'M12 5v14', key: 's699le' }],\n];\n\n/**\n * @component @name Plus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KICA8cGF0aCBkPSJNMTIgNXYxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Plus = createLucideIcon('plus', __iconNode);\n\nexport default Plus;\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,UAAA,CAAA,CAAA,CAAuB;IAClC;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAQ,CAAA;YAAE,GAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAY,CAAA,CAAA,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAA;IACzC;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAQ,CAAA;YAAE,GAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAY,CAAA,CAAA,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAA;CAC3C;AAaA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,IAAA,CAAA,CAAA,KAAO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,iKAAA,EAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAQ,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA"}},
    {"offset": {"line": 384, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/lucide-react/dist/esm/icons/pencil.js","sources":["file:///C:/Serenyo/Projetos/nexo/frontend/node_modules/lucide-react/src/icons/pencil.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z',\n      key: '1a8usu',\n    },\n  ],\n  ['path', { d: 'm15 5 4 4', key: '1mk7zo' }],\n];\n\n/**\n * @component @name Pencil\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEuMTc0IDYuODEyYTEgMSAwIDAgMC0zLjk4Ni0zLjk4N0wzLjg0MiAxNi4xNzRhMiAyIDAgMCAwLS41LjgzbC0xLjMyMSA0LjM1MmEuNS41IDAgMCAwIC42MjMuNjIybDQuMzUzLTEuMzJhMiAyIDAgMCAwIC44My0uNDk3eiIgLz4KICA8cGF0aCBkPSJtMTUgNSA0IDQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/pencil\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Pencil = createLucideIcon('pencil', __iconNode);\n\nexport default Pencil;\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,UAAA,CAAA,CAAA,CAAuB;IAClC;QACE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QACA;YACE,CAAA,EAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YACH,GAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA;KAET;IACA;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAQ,CAAA;YAAE,GAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAa,CAAA,CAAA,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAA;CAC5C;AAaA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,MAAA,CAAA,CAAA,KAAS,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,iKAAA,EAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAU,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA"}}]
}